<?xml version='1.0' encoding='UTF-8'?>
<definitions 
	id="definitions"
	xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" 
	xmlns:activiti="http://activiti.org/bpmn" 
	targetNamespace="autuacao"
	xmlns:tns="autuacao">
  <signal id="peticaoInvalida" name="peticaoInvalida" />
  <message id="remessaFisica" name="remessaFisica" />
  <message id="remessaEletronica" name="remmessaEletronica" />
  <process id="autuarOriginarios" isExecutable="true">
    <startEvent id="receberremessa">
      <messageEventDefinition messageRef="tns:remessaFisica" />
    </startEvent>
    <startEvent id="peticionareletronico">
      <messageEventDefinition messageRef="tns:remessaEletronica" />
    </startEvent>
    <userTask id="preautuacao" name="Pré-Autuar Processo" activiti:candidateGroups="pre-autuador" />
    <subProcess id="analise" name="Análise">
      <startEvent id="iniciaranalise"/>
      <userTask id="autuacao" name="Autuar Processo" activiti:candidateGroups="autuador" />
      <endEvent id="finalizaranalise"/>
      <sequenceFlow id="autuar" sourceRef="iniciaranalise" targetRef="autuacao"/>
      <sequenceFlow id="finalisaranalise" sourceRef="autuacao" targetRef="finalizaranalise"/>
    </subProcess>
	<userTask id="devolucao" name="Devolver Processo" activiti:candidateGroups="devolvedor"/>
	<sequenceFlow id="finalizardevolucao" sourceRef="devolucao" targetRef="devolvido" />    
    <endEvent id="devolvido" name="Devolvido" />
    <sequenceFlow id="distribuir" sourceRef="analise" targetRef="distribuicao"/>
    <userTask id="distribuicao" name="Distribuir Processo" activiti:candidateGroups="distribuidor" />
    <sequenceFlow id="finalizardistribuicao" sourceRef="distribuicao" targetRef="distribuido"/>
    <endEvent id="distribuido" name="Distribuído"/>
    <sequenceFlow id="devolver" sourceRef="abortarAnalise" targetRef="devolvido" />
	<boundaryEvent id="abortarAnalise" attachedToRef="analise" cancelActivity="true">
      <signalEventDefinition signalRef="peticaoInvalida" />
    </boundaryEvent>
    <sequenceFlow id="preautuar" sourceRef="receberremessa" targetRef="preautuacao"/>
    <sequenceFlow id="analisar" sourceRef="preautuacao" targetRef="analise"/>
    <sequenceFlow id="peticionar" sourceRef="peticionareletronico" targetRef="analise"/>
  </process>
</definitions>